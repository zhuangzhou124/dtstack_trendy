--name:sanmu_test2
--author:sanmu
--create time:2019-10-15 10:29
--drop table sanmu_test2



--imp_ods_stock_physical_order_out_notify_items(根据create_time时间字段增量同步)
--imp_ods_stock_physical_order_out_items(根据create_time时间字段增量同步)
--imp_ods_stock_physical_order_inventory_items(根据create_time时间字段增量同步,但是目前看create_time字段都是15号的) 1d
--imp_ods_stock_physical_order_in_notify_items(根据create_time时间字段增量同步,但是目前看create_time字段都是15号的)
--imp_ods_stock_physical_order_in_items (根据create_time时间字段增量同步)
--imp_ods_stock_logic_order_in_notify(根据哪个时间字段增量同步 make_order_time还是create_time)
--imp_ods_stock_logic_order_out(根据哪个时间字段增量同步 make_order_time还是create_time)
--imp_ods_stock_logic_order_in(根据哪个时间字段增量同步 make_order_time还是create_time)

--ods_stock_physical_order_out_notify_items(根据create_time时间字段增量同步)
--ods_stock_physical_order_out_items(根据create_time时间字段增量同步)
--ods_stock_physical_order_inventory_items(根据create_time时间字段增量同步,但是目前看create_tiem字段都是15号的) 1d
--ods_stock_physical_order_in_notify_items(根据create_time时间字段增量同步,但是目前看create_tiem字段都是15号的)
--ods_stock_physical_order_in_items (根据create_time时间字段增量同步)

--ods_stock_logic_order_in_notify(根据哪个时间字段增量同步 make_order_time还是create_time) 15mm
--ods_stock_logic_order_out(根据哪个时间字段增量同步 make_order_time还是create_time) 15mm
--ods_stock_logic_order_in(根据哪个时间字段增量同步 make_order_time还是create_time) 15mm



--15mm
ods_stock_logic_items(根据create_time时间字段增量同步,但是目前看create_tiem字段都是15号的)

ods_stock_logic_order_out(根据时间字段增量同步 make_order_time)
ods_stock_logic_order_out_items(根据create_time时间字段增量同步)

ods_stock_logic_order_in(根据时间字段增量同步 make_order_time)
ods_stock_logic_order_in_items(根据create_time时间字段增量同步,但是目前看create_tiem字段都是15号的)
ods_stock_logic_order_in_notify(根据时间字段增量同步 make_order_time)
ods_stock_logic_order_in_notify_items(根据create_time时间字段增量同步,但是目前看create_tiem字段都是15号的)


ods_stock_logic_order_difference(根据时间字段增量同步 make_order_time)
ods_stock_logic_order_difference_items(根据create_time时间字段增量同步,但是目前看create_tiem字段都是15号的)




--毅达
desc ods_stock_logic_order_difference;



select distinct create_time from ods_stock_logic_order_difference_items where ds = '20191014';

DROP TABLE IF EXISTS ods_stock_logic_order_reserve;


CREATE TABLE   ods_stock_logic_order_reserve(
	id                    BIGINT COMMENT 'ID',
	stock_logic_id        BIGINT COMMENT
	'逻辑库存id',
	order_no              STRING COMMENT '单据编码',
	order_status          BIGINT COMMENT '单据状态',
	order_business_status BIGINT COMMENT '单据业务状态',
	app_id                STRING COMMENT '应用ID',
	org_code              STRING COMMENT '销售组织编码',
	remark                STRING COMMENT '备注',
	create_user_id        BIGINT COMMENT '创建用户编码',
	create_user_name      STRING COMMENT '创建用户名（冗余）',
	create_time           STRING COMMENT '创建时间',
	last_update_user_id   BIGINT COMMENT '最后更新用户编码',
	last_update_user_name STRING COMMENT '最后更新用户名（冗余）',
	last_update_time      STRING COMMENT '最后更新时间',
	deleted               STRING COMMENT '软删除',
	external_order_no     STRING COMMENT '外部单据编码',
	effect_time           STRING COMMENT '生效时间',
	failure_time          STRING COMMENT '失效时间',
	inventory_control     BIGINT COMMENT '负库存控制',
	made_order_time       STRING COMMENT '制单时间')
COMMENT '' PARTITIONED BY(
	ds STRING COMMENT '时间分区');

ALTER TABLE ods_stock_logic_order_reserve SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_logic_order_reserve_items;

CREATE TABLE   ods_stock_logic_order_reserve_items(
	id                     BIGINT COMMENT 'ID',
	logic_order_reserve_id BIGINT COMMENT '预留单id',
	owner_channel_code     STRING COMMENT '货权渠道编码',
	sku_code               STRING COMMENT '商品sku',
	qty_pre_hold           BIGINT COMMENT '预留商品数量',
	app_id                 STRING COMMENT '应用ID',
	org_code               STRING COMMENT '销售组织编码',
	remark                 STRING COMMENT '备注',
	create_user_id         BIGINT COMMENT '创建用户编码',
	create_user_name       STRING COMMENT '创建用户名（冗余）',
	create_time            STRING COMMENT '创建时间',
	last_update_user_id    BIGINT COMMENT '最后更新用户编码',
	last_update_user_name  STRING COMMENT '最后更新用户名（冗余）',
	last_update_time       STRING COMMENT '最后更新时间',
	deleted                STRING COMMENT '软删除')
COMMENT '' PARTITIONED BY(
	ds STRING COMMENT '时间分区');

ALTER TABLE ods_stock_logic_order_reserve_items SET LIFECYCLE 365;



DROP TABLE IF EXISTS ods_stock_physical_items;

CREATE TABLE   ods_stock_physical_items(
	id                    BIGINT COMMENT 'ID',
	stock_physical_id     BIGINT COMMENT '物理库区id',
	sku_code              STRING COMMENT '商品sku',
	qty_receivable        BIGINT COMMENT '预收库存数',
	qty_received          BIGINT COMMENT '实际库存数',
	remark                STRING COMMENT '备注',
	create_user_id        BIGINT COMMENT '创建用户编码',
	create_user_name      STRING COMMENT '创建用户名（冗余）',
	create_time           STRING COMMENT '创建时间',
	last_update_user_id   BIGINT COMMENT '最后更新用户编码',
	last_update_user_name STRING COMMENT '最后更新用户名（冗余）',
	last_update_time      STRING COMMENT '最后更新时间',
	deleted               STRING COMMENT '软删除')
COMMENT '物理库存商品表' PARTITIONED BY(
	ds STRING COMMENT '时间分区');

ALTER TABLE ods_stock_physical_items SET LIFECYCLE 365;

DROP TABLE IF EXISTS ods_stock_physical_order_in;

CREATE TABLE   ods_stock_physical_order_in(
	id                           BIGINT COMMENT 'ID',
	stock_physical_id            BIGINT COMMENT '物理库区id',
	physical_order_in_notify_id  BIGINT COMMENT '入库通知单id',
	order_no                     STRING COMMENT '单据编码',
	order_status                 BIGINT COMMENT '单据状态',
	order_business_status        BIGINT COMMENT '单据业务状态',
	in_type                      BIGINT COMMENT '入库类型(实收、预收)',
	business_order_business_type BIGINT COMMENT '业务单据业务类型',
	business_order_no            STRING COMMENT '业务单据编码',
	made_order_time              STRING COMMENT '制单时间',
	online_store_order_no        STRING COMMENT '网店单号',
	delivery_mode                BIGINT COMMENT '配送方式（物流、自提、快递）',
	express_company              STRING COMMENT '快递公司',
	express_waybill_no           STRING COMMENT '快递运单号',
	receiver_id                  BIGINT COMMENT '收货方信息(关联联系人信息表)',
	sender_id                    BIGINT COMMENT '发货方信息(关联联系人信息表)',
	app_id                       STRING COMMENT '应用ID',
	org_code                     STRING COMMENT '销售组织编码',
	remark                       STRING COMMENT '备注',
	create_user_id               BIGINT COMMENT '创建用户编码',
	create_user_name             STRING COMMENT '创建用户名（冗余）',
	create_time                  STRING COMMENT '创建时间',
	last_update_user_id          BIGINT COMMENT '最后更新用户编码',
	last_update_user_name        STRING COMMENT '最后更新用户名（冗余）',
	last_update_time             STRING COMMENT '最后更新时间',
	deleted                      STRING COMMENT '软删除',
	external_order_no            STRING COMMENT '外部单据编码',
	physical_order_in_notify_no  STRING COMMENT '入库通知单编码',
	business_order_type          BIGINT COMMENT '业务单据类型')
COMMENT '入库结果单' PARTITIONED BY(
	ds STRING COMMENT '时间分区');

ALTER TABLE ods_stock_physical_order_in SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_order_in_items;

CREATE TABLE   ods_stock_physical_order_in_items(
	id                    BIGINT COMMENT 'ID',
	physical_order_in_id  BIGINT COMMENT '入库结果单id',
	sku_code              STRING COMMENT '商品sku',
	qty_receivable        BIGINT COMMENT '计划入库数',
	qty_received          BIGINT COMMENT '实际入库数',
	qty_receive_max       BIGINT COMMENT '最大可收数',
	qty_receive_plan      BIGINT COMMENT '预收数',
	qty_receive_send      BIGINT COMMENT '预收消费数',
	app_id                STRING COMMENT '应用ID',
	org_code              STRING COMMENT '销售组织编码',
	remark                STRING COMMENT '备注',
	create_user_id        BIGINT COMMENT '创建用户编码',
	create_user_name      STRING COMMENT '创建用户名（冗余）',
	create_time           STRING COMMENT '创建时间',
	last_update_user_id   BIGINT COMMENT '最后更新用户编码',
	last_update_user_name STRING COMMENT '最后更新用户名（冗余）',
	last_update_time      STRING COMMENT '最后更新时间',
	deleted               STRING COMMENT '软删除')
COMMENT '入库结果商品表' PARTITIONED BY(
	ds STRING COMMENT '时间分区');

ALTER TABLE ods_stock_physical_order_in_items SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_order_in_notify;

CREATE TABLE   ods_stock_physical_order_in_notify(
	id                           BIGINT COMMENT 'ID',
	stock_physical_id            BIGINT COMMENT '物理库区id',
	logic_order_in_notify_id     BIGINT COMMENT '收货通知单id',
	order_no                     STRING COMMENT '单据编码（库存中心生成）',
	order_status                 BIGINT COMMENT '单据状态',
	order_business_status        BIGINT COMMENT '单据业务状态',
	business_order_business_type BIGINT COMMENT '业务单据业务类型',
	business_order_no            STRING COMMENT '业务单据编码',
	made_order_time              STRING COMMENT '制单时间',
	online_store_order_no        STRING COMMENT '网店单号',
	process_type                 BIGINT COMMENT '处理类型（内部/外部处理）',
	delivery_mode                BIGINT COMMENT '配送方式（物流、自提、快递）',
	express_company              STRING COMMENT '快递公司',
	express_waybill_no           STRING COMMENT '快递运单号',
	receiver_id                  BIGINT COMMENT '收货方信息(关联联系人信息表)',
	sender_id                    BIGINT COMMENT '发货方信息(关联联系人信息表)',
	app_id                       STRING COMMENT '应用ID',
	org_code                     STRING COMMENT '销售组织编码',
	remark                       STRING COMMENT '备注',
	create_user_id               BIGINT COMMENT '创建用户编码',
	create_user_name             STRING COMMENT '创建用户名（冗余）',
	create_time                  STRING COMMENT '创建时间',
	last_update_user_id          BIGINT COMMENT '最后更新用户编码',
	last_update_user_name        STRING COMMENT '最后更新用户名（冗余）',
	last_update_time             STRING COMMENT '最后更新时间',
	deleted                      STRING COMMENT '软删除',
	external_order_no            STRING COMMENT '外部单据编码',
	logic_order_in_notify_no     STRING COMMENT '收货通知单编码',
	business_order_type          BIGINT COMMENT '业务单据类型')
COMMENT '入库通知单' PARTITIONED BY(
	ds STRING COMMENT '时间分区');


ALTER TABLE ods_stock_physical_order_in_notify SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_order_in_notify_items;

CREATE TABLE   ods_stock_physical_order_in_notify_items(
	id                          BIGINT COMMENT 'ID',
	physical_order_in_notify_id BIGINT COMMENT '入库通知单id',
	sku_code                    STRING COMMENT '商品sku',
	qty_receivable              BIGINT COMMENT '计划入库数（应收）',
	qty_received                BIGINT COMMENT '实际入库数（实际入库）',
	qty_receive_max             BIGINT COMMENT '最大可收数',
	qty_receive_plan            BIGINT COMMENT '预收数（越库）',
	qty_receive_send            BIGINT COMMENT '预收消费数（越库）',
	app_id                      STRING COMMENT '应用ID',
	org_code                    STRING COMMENT '销售组织编码',
	remark                      STRING COMMENT '备注',
	create_user_id              BIGINT COMMENT '创建用户编码',
	create_user_name            STRING COMMENT '创建用户名（冗余）',
	create_time                 STRING COMMENT '创建时间',
	last_update_user_id         BIGINT COMMENT '最后更新用户编码',
	last_update_user_name       STRING COMMENT '最后更新用户名（冗余）',
	last_update_time            STRING COMMENT '最后更新时间',
	deleted                     STRING COMMENT '软删除')
COMMENT '入库通知商品表' PARTITIONED BY(
	ds STRING COMMENT '时间分区');

ALTER TABLE ods_stock_physical_order_in_notify_items SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_order_inventory;

CREATE TABLE   ods_stock_physical_order_inventory(
	id                      BIGINT COMMENT 'ID',
	stock_physical_id       BIGINT COMMENT '物理库区id',
	order_no                STRING COMMENT '单据编码',
	business_type           BIGINT COMMENT '盘点类型（全盘、部分盘）',
	made_order_time         STRING COMMENT '制单时间',
	order_business_status   BIGINT COMMENT '单据业务状态',
	order_status            BIGINT COMMENT '单据状态',
	app_id                  STRING COMMENT '应用ID',
	org_code                STRING COMMENT '销售组织编码',
	remark                  STRING COMMENT '备注',
	create_user_id          BIGINT COMMENT '创建用户编码',
	create_user_name        STRING COMMENT '创建用户名（冗余）',
	create_time             STRING COMMENT '创建时间',
	last_update_user_id     BIGINT COMMENT '最后更新用户编码',
	last_update_user_name   STRING COMMENT '最后更新用户名（冗余）',
	last_update_time        STRING COMMENT '最后更新时间',
	deleted                 STRING COMMENT '软删除',
	inventory_logic_id      BIGINT COMMENT '盘点生效逻辑仓库id',
	external_inventory_code STRING COMMENT '外部盘点单据编码',
	effect_status           BIGINT COMMENT '生效状态',
	adjust_type             BIGINT COMMENT '库存调整类型',
	inventory_control       BIGINT COMMENT '负库存控制',
	audit_time              STRING COMMENT '审核时间')
COMMENT '盘点单' PARTITIONED BY(
	ds STRING COMMENT '时间分区');


ALTER TABLE ods_stock_physical_order_inventory SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_order_inventory_items;

CREATE TABLE   ods_stock_physical_order_inventory_items(
	id                          BIGINT COMMENT 'ID',
	physical_order_inventory_id BIGINT COMMENT '盘点通知单id',
	sku_code                    STRING COMMENT '商品sku',
	price_retail                DOUBLE COMMENT '吊牌价（去商品中心查）',
	qty_store                   BIGINT COMMENT '账面商品数量',
	qty_reality                 BIGINT COMMENT '实际商品数量（回写才有的）',
	app_id                      STRING COMMENT '应用ID',
	org_code                    STRING COMMENT '销售组织编码',
	remark                      STRING COMMENT '备注',
	create_user_id              BIGINT COMMENT '创建用户编码',
	create_user_name            STRING COMMENT '创建用户名（冗余）',
	create_time                 STRING COMMENT '创建时间',
	last_update_user_id         BIGINT COMMENT '最后更新用户编码',
	last_update_user_name       STRING COMMENT '最后更新用户名（冗余）',
	last_update_time            STRING COMMENT '最后更新时间',
	deleted                     STRING COMMENT '软删除',
	qty_change                  BIGINT COMMENT '差异数',
	qty_scanning                BIGINT COMMENT '扫码数',
	compensation_price          DOUBLE COMMENT '折损单价',
	compensation_rate           DOUBLE COMMENT '折损价比例(对比吊牌价)',
	compensation_base_on        STRING COMMENT '基于什么进行折损计价',
	compensation_base_on_desc   STRING COMMENT '折损计价选取规则描述',
	owner_channel_code          STRING COMMENT '货权渠道编码')
COMMENT '盘点商品表' PARTITIONED BY(
	ds STRING COMMENT '时间分区');


ALTER TABLE ods_stock_physical_order_inventory_items SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_order_moving;

CREATE TABLE   ods_stock_physical_order_moving(
	id                    BIGINT COMMENT 'ID',
	order_no              STRING COMMENT '单据编码',
	out_physical_id       BIGINT COMMENT '移出物理库区id',
	in_physical_id        BIGINT COMMENT '移入物理库区id',
	out_time              STRING COMMENT '移出时间',
	in_time               STRING COMMENT '移入时间',
	order_business_status BIGINT COMMENT '单据业务状态',
	app_id                STRING COMMENT '应用ID',
	org_code              STRING COMMENT '销售组织编码',
	remark                STRING COMMENT '备注',
	create_user_id        BIGINT COMMENT '创建用户编码',
	create_user_name      STRING COMMENT '创建用户名（冗余）',
	create_time           STRING COMMENT '创建时间',
	last_update_user_id   BIGINT COMMENT '最后更新用户编码',
	last_update_user_name STRING COMMENT '最后更新用户名（冗余）',
	last_update_time      STRING COMMENT '最后更新时间',
	deleted               STRING COMMENT '软删除',
	external_order_no     STRING COMMENT '外部单据编码',
	effect_status         BIGINT COMMENT '生效状态',
	inventory_control     BIGINT COMMENT '负库存控制',
	out_logic_id          BIGINT COMMENT '移出逻辑仓ID',
	in_logic_id           BIGINT COMMENT '移入逻辑仓ID',
	made_order_time       STRING COMMENT '制单时间')
COMMENT '移库结果单' PARTITIONED BY(
	ds STRING COMMENT '时间分区');

ALTER TABLE ods_stock_physical_order_moving SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_order_moving_items;

CREATE TABLE   ods_stock_physical_order_moving_items(
	id                       BIGINT COMMENT 'ID',
	physical_order_moving_id BIGINT COMMENT '移库结果单id',
	sku_code                 STRING COMMENT '商品sku',
	qty_out                  BIGINT COMMENT '移出数量',
	qty_in                   BIGINT COMMENT '移入数量',
	app_id                   STRING COMMENT '应用ID',
	org_code                 STRING COMMENT '销售组织编码',
	remark                   STRING COMMENT '备注',
	create_user_id           BIGINT COMMENT '创建用户编码',
	create_user_name         STRING COMMENT '创建用户名（冗余）',
	create_time              STRING COMMENT '创建时间',
	last_update_user_id      BIGINT COMMENT '最后更新用户编码',
	last_update_user_name    STRING COMMENT '最后更新用户名（冗余）',
	last_update_time         STRING COMMENT '最后更新时间',
	deleted                  STRING COMMENT '软删除',
	owner_channel_code       STRING COMMENT '货权渠道编码')
COMMENT '移库结果商品表' PARTITIONED BY(
	ds STRING COMMENT '时间分区');

ALTER TABLE ods_stock_physical_order_moving_items SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_order_out;

CREATE TABLE   ods_stock_physical_order_out(
	id                           BIGINT COMMENT 'ID',
	physical_order_out_notify_id BIGINT COMMENT '出库通知单id',
	stock_physical_id            BIGINT COMMENT '物理库区id',
	order_no                     STRING COMMENT '单据编码',
	order_status                 BIGINT COMMENT '单据状态',
	order_business_status        BIGINT COMMENT '单据业务状态',
	business_order_business_type BIGINT COMMENT '业务单据业务类型',
	business_order_no            STRING COMMENT '业务单据编码',
	made_order_time              STRING COMMENT '制单时间',
	online_store_order_no        STRING COMMENT '网店单号',
	process_type                 BIGINT COMMENT '处理类型（内部/外部处理）',
	delivery_mode                BIGINT COMMENT '配送方式（物流、自提、快递）',
	express_company              STRING COMMENT '快递公司',
	express_waybill_no           STRING COMMENT '快递运单号',
	receiver_id                  BIGINT COMMENT '收货方信息(关联联系人信息表)',
	sender_id                    BIGINT COMMENT '发货方信息(关联联系人信息表)',
	app_id                       STRING COMMENT '应用ID',
	org_code                     STRING COMMENT '销售组织编码',
	remark                       STRING COMMENT '备注',
	create_user_id               BIGINT COMMENT '创建用户编码',
	create_user_name             STRING COMMENT '创建用户名（冗余）',
	create_time                  STRING COMMENT '创建时间',
	last_update_user_id          BIGINT COMMENT '最后更新用户编码',
	last_update_user_name        STRING COMMENT '最后更新用户名（冗余）',
	last_update_time             STRING COMMENT '最后更新时间',
	deleted                      STRING COMMENT '软删除',
	external_order_no            STRING COMMENT '外部单据编码',
	physical_order_out_notify_no STRING COMMENT '出库通知单编码',
	inventory_control            BIGINT COMMENT '负库存控制',
	business_order_type          BIGINT COMMENT '业务单据类型')
COMMENT '出库结果单' PARTITIONED BY(
	ds STRING COMMENT '时间分区');

ALTER TABLE ods_stock_physical_order_out SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_order_out_items;

CREATE TABLE   ods_stock_physical_order_out_items(
	id                    BIGINT COMMENT 'ID',
	physical_order_out_id BIGINT COMMENT '出库结果单id',
	sku_code              STRING COMMENT '商品sku',
	qty_sendable          BIGINT COMMENT '计划出库数量',
	qty_sended            BIGINT COMMENT '实际出库数量',
	app_id                STRING COMMENT '应用ID',
	org_code              STRING COMMENT '销售组织编码',
	remark                STRING COMMENT '备注',
	create_user_id        BIGINT COMMENT '创建用户编码',
	create_user_name      STRING COMMENT '创建用户名（冗余）',
	create_time           STRING COMMENT '创建时间',
	last_update_user_id   BIGINT COMMENT '最后更新用户编码',
	last_update_user_name STRING COMMENT '最后更新用户名（冗余）',
	last_update_time      STRING COMMENT '最后更新时间',
	deleted               STRING COMMENT '软删除')
COMMENT '出库结果单商品表' PARTITIONED BY(
	ds STRING COMMENT '时间分区');


ALTER TABLE ods_stock_physical_order_out_items SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_order_out_notify;

CREATE TABLE   ods_stock_physical_order_out_notify(
	id                           BIGINT COMMENT 'ID',
	stock_physical_id            BIGINT COMMENT '物理库区id',
	logic_order_out_notify_id    BIGINT COMMENT '发货通知单id',
	order_no                     STRING COMMENT '单据编码',
	order_status                 BIGINT COMMENT '单据状态',
	order_business_status        BIGINT COMMENT '单据业务状态',
	order_hangup_status          BIGINT COMMENT '单据挂起状态',
	business_order_business_type BIGINT COMMENT '业务类型',
	business_order_no            STRING COMMENT '业务单据编码',
	made_order_time              STRING COMMENT '制单时间',
	online_store_order_no        STRING COMMENT '网店单号',
	process_type                 STRING COMMENT '处理类型（内部/外部处理）',
	delivery_mode                BIGINT COMMENT '配送方式（物流、自提、快递）',
	express_company              STRING COMMENT '快递公司',
	express_waybill_no           STRING COMMENT '快递运单号',
	receiver_id                  BIGINT COMMENT '收货方信息(关联联系人信息表)',
	sender_id                    BIGINT COMMENT '发货方信息(关联联系人信息表)',
	app_id                       STRING COMMENT '应用ID',
	org_code                     STRING COMMENT '销售组织编码',
	remark                       STRING COMMENT '备注',
	create_user_id               BIGINT COMMENT '创建用户编码',
	create_user_name             STRING COMMENT '创建用户名（冗余）',
	create_time                  STRING COMMENT '创建时间',
	last_update_user_id          BIGINT COMMENT '最后更新用户编码',
	last_update_user_name        STRING COMMENT '最后更新用户名（冗余）',
	last_update_time             STRING COMMENT '最后更新时间',
	deleted                      STRING COMMENT '软删除',
	external_order_no            STRING COMMENT '外部单据编码',
	logic_order_out_notify_no    STRING COMMENT '发货通知单编码',
	inventory_control            BIGINT COMMENT '负库存控制',
	business_order_type          BIGINT COMMENT '业务单据类型')
COMMENT '出库通知单' PARTITIONED BY(
	ds STRING COMMENT '时间分区');


ALTER TABLE ods_stock_physical_order_out_notify SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_order_out_notify_items;

CREATE TABLE   ods_stock_physical_order_out_notify_items(
	id                           BIGINT COMMENT 'ID',
	physical_order_out_notify_id BIGINT COMMENT '出库通知单id',
	sku_code                     STRING COMMENT '商品sku',
	qty_sendable                 BIGINT COMMENT '计划出库数量',
	qty_sended                   BIGINT COMMENT '实际出库数量',
	app_id                       STRING COMMENT '应用ID',
	org_code                     STRING COMMENT '销售组织编码',
	remark                       STRING COMMENT '备注',
	create_user_id               BIGINT COMMENT '创建用户编码',
	create_user_name             STRING COMMENT '创建用户名（冗余）',
	create_time                  STRING COMMENT '创建时间',
	last_update_user_id          BIGINT COMMENT '最后更新用户编码',
	last_update_user_name        STRING COMMENT '最后更新用户名（冗余）',
	last_update_time             STRING COMMENT '最后更新时间',
	deleted                      STRING COMMENT '软删除')
COMMENT '出库通知单商品表' PARTITIONED BY(
	ds STRING COMMENT '时间分区');


ALTER TABLE ods_stock_physical_order_out_notify_items SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_rel;

CREATE TABLE   ods_stock_physical_rel(
	id                      BIGINT COMMENT 'ID',
	stock_physical_id       BIGINT COMMENT '物理库区id',
	ref_warehouse_area_code STRING COMMENT '关系库区编码',
	ref_warehouse_area_name STRING COMMENT '关系库区名称',
	rel_type                BIGINT COMMENT '关系类型',
	remark                  STRING COMMENT '备注',
	create_user_id          BIGINT COMMENT '创建用户编码',
	create_user_name        STRING COMMENT '创建用户名（冗余）',
	create_time             STRING COMMENT '创建时间',
	last_update_user_id     BIGINT COMMENT '最后更新用户编码',
	last_update_user_name   STRING COMMENT '最后更新用户名（冗余）',
	last_update_time        STRING COMMENT '最后更新时间',
	deleted                 STRING COMMENT '软删除',
	sku_type                STRING COMMENT '商品类型',
	move_stloc              STRING COMMENT '移入、移出仓',
	wms_warehouse_code      STRING COMMENT 'wms仓库编码')
COMMENT '物理库区映射关系表' PARTITIONED BY(
	ds STRING COMMENT '时间分区');


ALTER TABLE ods_stock_physical_rel SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_physical_warehouse;

CREATE TABLE   ods_stock_physical_warehouse(
	id                            BIGINT COMMENT 'ID',
	stock_physical_warehouse_code STRING COMMENT '物理仓库编码',
	stock_physical_warehouse_name STRING COMMENT '物理仓库名称',
	terminal_code                 STRING COMMENT '终端编码',
	address_id                    BIGINT COMMENT '关联地址id',
	manager_name                  STRING COMMENT '管理员姓名',
	contract                      STRING COMMENT '联系电话',
	remark                        STRING COMMENT '备注',
	create_user_id                BIGINT COMMENT '创建用户编码',
	create_user_name              STRING COMMENT '创建用户名（冗余）',
	create_time                   STRING COMMENT '创建时间',
	last_update_user_id           BIGINT COMMENT '最后更新用户编码',
	last_update_user_name         STRING COMMENT '最后更新用户名（冗余）',
	last_update_time              STRING COMMENT '最后更新时间',
	deleted                       STRING COMMENT '软删除',
	STATUS                        STRING COMMENT '状态(1-启用/0-禁用)')
COMMENT '物理仓库信息表' PARTITIONED BY(
	ds STRING COMMENT '时间分区');


ALTER TABLE ods_stock_physical_warehouse SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_warehouse_rel;

CREATE TABLE   ods_stock_warehouse_rel(
	id                            BIGINT COMMENT 'ID',
	stock_physical_warehouse_id   BIGINT COMMENT '物理仓库id',
	stock_physical_warehouse_code STRING COMMENT '物理仓库编码',
	rel_warehouse_code            STRING COMMENT '映射仓库编码',
	rel_warehouse_name            STRING COMMENT '映射仓库名称',
	rel_type                      BIGINT COMMENT '映射类型(比如1-wms)',
	remark                        STRING COMMENT '备注',
	create_user_id                BIGINT COMMENT '创建用户编码',
	create_user_name              STRING COMMENT '创建用户名（冗余）',
	create_time                   STRING COMMENT '创建时间',
	last_update_user_id           BIGINT COMMENT '最后更新用户编码',
	last_update_user_name         STRING COMMENT '最后更新用户名（冗余）',
	last_update_time              STRING COMMENT '最后更新时间',
	deleted                       STRING COMMENT '软删除')
COMMENT '仓库映射关系表' PARTITIONED BY(
	ds STRING COMMENT '时间分区');

ALTER TABLE ods_stock_warehouse_rel SET LIFECYCLE 365;

--庄周

DROP TABLE IF EXISTS ods_stock_physical;

CREATE TABLE   ods_stock_physical(
	id                          BIGINT COMMENT 'ID',
	stock_physical_code         STRING COMMENT '物理库区编码',
	stock_physical_name         STRING COMMENT '物理库区名称',
	stock_physical_warehouse_id BIGINT COMMENT '关联物理仓库id',
	business_type               STRING COMMENT '业务形态',
	deliver_period              BIGINT COMMENT '发货周期',
	operating_hours_start       STRING COMMENT '作业起始时间',
	operating_hours_close       STRING COMMENT '作业结束时间',
	manager_name                STRING COMMENT '管理员姓名',
	contract                    STRING COMMENT '联系电话',
	remark                      STRING COMMENT '备注',
	create_user_id              BIGINT COMMENT '创建用户编码',
	create_user_name            STRING COMMENT '创建用户名（冗余）',
	create_time                 STRING COMMENT '创建时间',
	last_update_user_id         BIGINT COMMENT '最后更新用户编码',
	last_update_user_name       STRING COMMENT '最后更新用户名（冗余）',
	last_update_time            STRING COMMENT '最后更新时间',
	deleted                     STRING COMMENT '软删除',
	STATUS                      STRING COMMENT '状态(1启用/0禁用)')
COMMENT '库存中心-物理库区表' PARTITIONED BY(
	ds STRING COMMENT '时间分区');


ALTER TABLE ods_stock_physical SET LIFECYCLE 365;


--杜若

DROP TABLE IF EXISTS ods_coupon_use;

CREATE TABLE   ods_coupon_use(
	id                     INT COMMENT '主键',
	coupon_no              STRING COMMENT '券号',
	channel_code           STRING COMMENT '渠道号',
	brand_code             STRING COMMENT '品牌号',
	channel_endpoint_code  STRING COMMENT '渠道终端号',
	member_no              STRING COMMENT '会员号',
	biz_order_no           STRING COMMENT '业务号',
	biz_order_time         DATETIME COMMENT '业务时间',
	STATUS                 INT COMMENT '状态',
	last_update_user_id    INT COMMENT '最后更新用户编码',
	create_time            DATETIME COMMENT '创建时间',
	create_user_name       STRING COMMENT '创建用户名（冗余）',
	create_user_id         INT COMMENT '创建用户编码',
	last_update_time       DATETIME COMMENT '最后更新时间',
	last_update_user_name  STRING COMMENT '最后更新用户名（冗余）',
	remark                 STRING COMMENT '备注',
	deleted                STRING COMMENT '软删除：1-已删除、0-未删除',
	setting_copy           STRING COMMENT '规则备份  核销规则备份',
	operation              STRING COMMENT '操作类型',
	app_id                 STRING COMMENT '应用ID',
	org_code               STRING COMMENT '组织编码',
	coupon_template_no     STRING COMMENT '券模板编号'
)COMMENT '券使用记录' PARTITIONED BY(
	ds STRING COMMENT '时间分区');
--修改生命周期
ALTER TABLE ods_coupon_use SET LIFECYCLE 365;


--三木

DROP TABLE IF EXISTS ods_promotion_info;

CREATE TABLE   ods_promotion_info(
	id                               BIGINT COMMENT '主键',
	promotion_no                     STRING COMMENT '营销活动编号',
	promotion_name                   STRING COMMENT '营销活动名称',
	promotion_desc                   STRING COMMENT '营销活动描述',
	promotion_rules_settings         STRING COMMENT '执行规则JSON',
	loop_type                        BIGINT COMMENT '循环类型 0 无循环 1 有限循环 2 无限循环',
	loop_limit                       BIGINT COMMENT '循环上限',
	priority                         BIGINT COMMENT '优先级',
	source_settings                  STRING COMMENT '来源设置',
	user_settings                    STRING COMMENT '用户设置',
	other_settings                   STRING COMMENT '其他设置',
	superposition                    STRING COMMENT '叠加设置',
	STATUS                           BIGINT COMMENT '状态 0 禁用 1 启用',
	remark                           STRING COMMENT '备注',
	create_user_id                   STRING COMMENT '创建人ID',
	create_user_name                 STRING COMMENT '创建人名',
	create_time                      STRING COMMENT '创建时间',
	last_update_user_id              STRING COMMENT '更新人ID',
	last_update_user_name            STRING COMMENT '更新人名',
	last_update_time                 STRING COMMENT '更新时间',
	deleted                          STRING COMMENT '删除标记 0 未删 1已删',
	promotion_type                   BIGINT COMMENT '营销活动类型',
	promotion_template_code          STRING COMMENT '营销活动模板编号',
	period_settings                  STRING COMMENT '活动周期设置',
	item_settings                    STRING COMMENT '商品项设置',
	app_id                           STRING COMMENT '应用ID',
	org_code                         STRING COMMENT '组织编码',
	promotion_base_on                STRING COMMENT '销活动作用范围 order product',
	order_print_type                 BIGINT COMMENT '单据打印类型 原价入机 1 折扣入机 2',
	effective_start_date             STRING COMMENT '生效起始时间',
	effective_end_date               STRING COMMENT '生效结束时间'
)COMMENT '促销信息' PARTITIONED BY(
	ds STRING COMMENT '时间分区');
--修改生命周期
ALTER TABLE ods_promotion_info SET LIFECYCLE 365;


DROP TABLE IF EXISTS ods_stock_logic_order_difference;


CREATE TABLE IF NOT EXISTS ods_stock_logic_order_difference(
	id                             BIGINT COMMENT 'ID',
	logic_order_allocate_id        BIGINT COMMENT '调配单id',
	stock_logic_in_id              BIGINT COMMENT '调入逻辑库存id',
	stock_logic_out_id             BIGINT COMMENT '调出逻辑库存id',
	stock_logic_responsibility_id  BIGINT COMMENT '差异承担逻辑库存id',
	order_no                       STRING COMMENT '单据编码',
	made_order_time                STRING COMMENT '制单时间',
	order_status                   BIGINT COMMENT '单据状态',
	app_id                         STRING COMMENT '应用ID',
	org_code                       STRING COMMENT '品牌编码',
	remark                         STRING COMMENT '备注',
	create_user_id                 BIGINT COMMENT '创建用户编码',
	create_user_name               STRING COMMENT '创建用户名（冗余）',
	create_time                    STRING COMMENT '创建时间',
	last_update_user_id            BIGINT COMMENT '最后更新用户编码',
	last_update_user_name          STRING COMMENT '最后更新用户名（冗余）',
	last_update_time               STRING COMMENT '最后更新时间',
	deleted                        STRING COMMENT '软删除',
	external_order_no              STRING COMMENT '外部单据编码',
	inventory_control              BIGINT COMMENT '负库存控制')
COMMENT '' PARTITIONED BY(
	ds STRING COMMENT '时间分区');


ALTER TABLE ods_stock_logic_order_difference SET LIFECYCLE 365;
